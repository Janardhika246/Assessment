<!DOCTYPE html>
<html>
<head>
    <title>Chat about PDF</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body class="chat-page">
    <div class="welcome">
        <img src="{{ url_for('static', filename='3.png') }}" alt="chatpdf">
        <h2>Hello there!<br>How can I help you today?</h2>
    </div>
    <div class="chatHistory">
        {% for item in history %}
            <div class="message {{ item.role }}">
                <div class="timestamp">{{ item.timestamp }}</div>
                <strong>{{ item.role|capitalize }}:</strong>
                {% if item.role == 'model' %}
                    <ul>
                        {% for point in item.text %}
                            <li>{{ point }}</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>{{ item.text }}</p>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    <div class="question">
        <form method="post">
            <textarea name="message" placeholder="Enter your message..." required></textarea>
            <button type="submit">
                <span class="material-symbols-rounded">send</span>
            </button>
        </form>
    </div>
    <div class="another">
        <a href="/"><span class="material-symbols-rounded">add</span></a>
        <div class="nav-button">
            <button class="btn white-btn"><a href="{{ url_for('logout') }}">Logout</a></button>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const textarea = document.querySelector('textarea[name="message"]');
            if (textarea) {
                function adjustHeight() {
                    textarea.style.height = 'auto';
                    textarea.style.height = Math.min(textarea.scrollHeight, 1000) + 'px';
                }
                textarea.addEventListener('input', adjustHeight);
                adjustHeight();
            }
        });
    </script>
</body>
</html>
