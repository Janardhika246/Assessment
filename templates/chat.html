<!DOCTYPE html>
<html>
<head>
    <title>Chat about PDF</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body class="chat-page">
    <div class="welcome">
        <img src="{{ url_for('static', filename='3.png') }}" alt="chatpdf">
        <h2> Hello there! <br> 
        How can I help you today?
        </h2>
    </div>
    <div class="question">
        <form method="post">
            <textarea name="message" placeholder="Enter your message..." required></textarea>
            <button>
                <span class="material-symbols-rounded">
                    send
                </span>
            </button>
        </form>
    </div>
    <div id="chatHistory" class="chatHistory">
        {% for item in history %}
            <div class="{{ item.role }}">
                <strong>{{ item.timestamp }} {{ item.role|capitalize }}:</strong>
                <p>{{ item.text }}</p>
            </div>
        {% endfor %}
    </div>
    <div class="another">
        <a href="/">Upload Another PDF</a>
    </div>

    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Select the textarea element by its name attribute
    const textarea = document.querySelector('textarea[name="message"]');
    
    if (textarea) {
        // Function to adjust height
        function adjustHeight() {
            textarea.style.height = 'auto'; // Reset height to auto
            textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px'; // Set height to scrollHeight or max-height
        }

        // Add event listener to adjust height on input
        textarea.addEventListener('input', adjustHeight);

        // Trigger an input event to set initial height
        adjustHeight();
    }
});

    </script>
    
</body>
</html>
